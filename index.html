<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Simulator | Rohit Singh</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        :root { --p: #4f46e5; --s: #10b981; --bg: #f3f4f6; --text: #1f2937; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); }
        
        /* Login Page */
        #login-page { display: flex; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #4f46e5, #7c3aed); }
        .login-card { background: white; padding: 40px; border-radius: 20px; width: 350px; text-align: center; box-shadow: 0 15px 30px rgba(0,0,0,0.2); }
        .up-box { width: 90px; height: 90px; border-radius: 50%; border: 3px dashed var(--p); margin: 0 auto 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .up-box img { width: 100%; height: 100%; object-fit: cover; }

        /* Dashboard Design (Same as your old one) */
        nav { background: white; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .container { max-width: 900px; margin: 30px auto; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border-top: 5px solid var(--p); }
        .task-list { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .task-item { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid #eee; align-items: center; }

        /* Advanced Certificate */
        #cert-page { display:none; padding: 40px 0; background: #333; text-align: center; }
        .certificate { width: 800px; height: 550px; background: white; margin: 0 auto; border: 15px solid #1e293b; padding: 40px; position: relative; box-sizing: border-box; background-image: url('https://www.transparenttextures.com/patterns/paper.png'); }
        .certificate::after { content: ''; position: absolute; top: 10px; left: 10px; right: 10px; bottom: 10px; border: 2px solid #d4af37; }
        #sig-canvas { border-bottom: 2px solid #000; background: #f9f9f9; cursor: crosshair; }

        .btn { padding: 12px 25px; background: var(--p); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }
        input { width: 90%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; }
    </style>
</head>
<body>

    <div id="login-page">
        <div class="login-card">
            <h2 style="color:var(--p)">Internship Login</h2>
            <div class="up-box" onclick="document.getElementById('imgInput').click()">
                <i class="fa fa-camera" id="camIcon"></i>
                <img id="prevImg" style="display:none">
            </div>
            <input type="file" id="imgInput" hidden accept="image/*">
            <input type="text" id="nameInput" placeholder="Full Name" value="rohit singh">
            <button class="btn" style="width:100%" onclick="handleLogin()">Login & Start</button>
        </div>
    </div>

    <div id="dash-page" style="display:none;">
        <nav>
            <b style="font-size: 20px;">ROHIT<span style="color:var(--p)">.LABS</span></b>
            <img id="navAvatar" style="width:40px; height:40px; border-radius:50%; border: 2px solid var(--p);">
        </nav>
        <div class="container">
            <h1>Welcome, <span id="user-display" style="color:var(--p)"></span>!</h1>
            
            <div class="grid">
                <div class="stat-card"><h3>3</h3><p>Total Tasks</p></div>
                <div class="stat-card"><h3 id="taskCount">0</h3><p>Completed</p></div>
                <div class="stat-card"><h3 style="color:var(--s)">Active</h3><p>Status</p></div>
            </div>

            <div class="task-list">
                <h3>Your Assignments</h3>
                <div class="task-item">
                    <span>Task 1: System Configuration</span>
                    <button class="btn" style="padding:5px 15px; font-size:12px" onclick="finishTask(this)">Finish</button>
                </div>
                <div class="task-item">
                    <span>Task 2: Database Integration</span>
                    <button class="btn" style="padding:5px 15px; font-size:12px" onclick="finishTask(this)">Finish</button>
                </div>
            </div>

            <div id="claim-btn" style="display:none; text-align:center; margin-top:30px;">
                <button class="btn" style="background:var(--text); padding:15px 40px;" onclick="showCertificate()">Claim Official Certificate</button>
            </div>
        </div>
    </div>

    <div id="cert-page">
        <div class="certificate" id="cert-area">
            <h1 style="font-size:50px; margin:0; font-family: serif;">CERTIFICATE</h1>
            <p style="letter-spacing: 5px;">OF COMPLETION</p>
            <br>
            <p>This is to certify that</p>
            <h2 id="cert-name-final" style="font-size:45px; color:var(--p); font-family: 'Brush Script MT', cursive; margin:10px 0;"></h2>
            <p>has successfully finished the <b>Professional Virtual Internship</b>.</p>
            <p>Date of Issue: <b id="current-date"></b></p>
            
            <div style="margin-top:50px; display:flex; justify-content:space-around; align-items: flex-end;">
                <div>
                    <img src="https://cdn-icons-png.flaticon.com/512/1040/1040230.png" style="width:60px; opacity:0.5;"><br>
                    <div style="border-top:2px solid #000; width:150px; padding-top:5px;">Director</div>
                </div>
                <div>
                    <canvas id="sig-canvas" width="180" height="60"></canvas><br>
                    <div style="border-top:2px solid #000; width:180px; padding-top:5px;"><b>Your Signature</b></div>
                </div>
            </div>
        </div>
        <br>
        <button class="btn" style="background:var(--s)" onclick="downloadPDF()">Download Official PDF</button>
        <button class="btn" style="background:#666; margin-left:10px;" onclick="location.reload()">Exit</button>
    </div>

    <script>
        // Photo Preview
        document.getElementById('imgInput').onchange = (e) => {
            const reader = new FileReader();
            reader.onload = (v) => {
                document.getElementById('prevImg').src = v.target.result;
                document.getElementById('prevImg').style.display = 'block';
                document.getElementById('navAvatar').src = v.target.result;
                document.getElementById('camIcon').style.display = 'none';
            };
            reader.readAsDataURL(e.target.files[0]);
        };

        // Login + Confetti
        function handleLogin() {
            const name = document.getElementById('nameInput').value;
            if(!name) return alert("Enter Name");
            document.getElementById('user-display').innerText = name;
            document.getElementById('cert-name-final').innerText = name;
            document.getElementById('current-date').innerText = new Date().toLocaleDateString('en-GB', {day:'numeric', month:'long', year:'numeric'});
            
            document.getElementById('login-page').style.display = 'none';
            document.getElementById('dash-page').style.display = 'block';
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        }

        // Task Counter
        let count = 0;
        function finishTask(btn) {
            btn.innerText = "Done âœ…";
            btn.style.background = "#10b981";
            btn.disabled = true;
            count++;
            document.getElementById('taskCount').innerText = count;
            confetti({ particleCount: 50, scalar: 0.8 });
            if(count >= 2) document.getElementById('claim-btn').style.display = 'block';
        }

        // Certificate + Signature
        function showCertificate() {
            document.getElementById('dash-page').style.display = 'none';
            document.getElementById('cert-page').style.display = 'block';
            confetti({ particleCount: 200, spread: 100 });
            
            // Init Signature
            const canvas = document.getElementById('sig-canvas');
            const ctx = canvas.getContext('2d');
            let drawing = false;
            canvas.onmousedown = () => drawing = true;
            canvas.onmouseup = () => { drawing = false; ctx.beginPath(); };
            canvas.onmousemove = (e) => {
                if(!drawing) return;
                const rect = canvas.getBoundingClientRect();
                ctx.lineWidth = 2;
                ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
                ctx.stroke();
            };
        }

        // PDF Download
        function downloadPDF() {
            const element = document.getElementById('cert-area');
            const opt = {
                margin: 0,
                filename: 'Internship_Certificate.pdf',
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'landscape' }
            };
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>

